[
  {
    "objectID": "index.html#background",
    "href": "index.html#background",
    "title": "Does NYC Metro Region Have Home-job Balance?",
    "section": "Background",
    "text": "Background\nFollowing the establishment and expansion of the commuter rail system in the early 1900s and the consequent growth of the regional highway network, New York City’s economic progress became closely entwined with the housing and population expansion in the surrounding region. NYC depends on a real estate market stretching beyond its city limits. The workforce in New York City comprises 8.8 million individuals, (2022 Labor Market Snapshot of New York, NYATEP) with 80% residing within the city’s five boroughs. The remaining 20%, live outside NYC, dispersed across other areas within the broader metropolitan New York region.\nTo study and predict the home-job mismatch trend, we would like to explore its geographic distribution, temporal trends, and in particular, the contributing factors, such as housing prices, job opportunities, and the pandemic. In this project, we attempt to use data analytics and machine learning methods to build a job geography model, explore the mechanisms, and predict future trends."
  },
  {
    "objectID": "index.html#the-questions-we-want-to-explore",
    "href": "index.html#the-questions-we-want-to-explore",
    "title": "Does NYC Metro Region Have Home-job Balance?",
    "section": "The Questions We Want to Explore",
    "text": "The Questions We Want to Explore\n\nHow does the Pandemic change the home and job distribution in the NYC Metro Region? (2019 vs. 2021)\nWhat is the commuting pattern between boroughs/counties?\nWhat variable contributes to the job-home mismatch?"
  },
  {
    "objectID": "index.html#geographical-boundary",
    "href": "index.html#geographical-boundary",
    "title": "Does NYC Metro Region Have Home-job Balance?",
    "section": "Geographical Boundary",
    "text": "Geographical Boundary\n\nNYC 5 boroughs:\n\nManhattan: New York County, New York - COUNTYFP = 061\nBrooklyn: Kings County, New York - COUNTYFP = 047\nBronx: Bronx County, New York - COUNTYFP = 005\nQueens: Queens County, New York - COUNTYFP = 081\nStaten Island: Richmond County, New York - COUNTYFP = 085\n\nOutside NYC counties:\n\nJersey City: Hudson County, New Jersey - COUNTYFP = 017 (State code = 34)\nLong Island: Nassau County, New York - COUNTYFP = 059\n\nGeographical level: by census tract"
  },
  {
    "objectID": "analysis/index.html",
    "href": "analysis/index.html",
    "title": "Analysis & Methods",
    "section": "",
    "text": "Spatial Join/ Folium Map: After wrangling and cleaning the data, to visualize population and jobs, our team utilized geospatial joins for the dataset in the NYC metro region. Then, we will use geopandas and folium maps to visualize them.\nSeaborn - Line Chart: To compare the job trend before and after the pandemic, we used a line chart to show the recent 20 years’ (2002-2022) job numbers.\nOther Exploratory Data Analysis: Some other datasets, such as median income and population density, could also hint at the reasons why certain areas in New York Metro Region attract neighborhood employment populations. By conducting EDAs, we could have a sense of the importance, geographical distribution and changing trend of the features, which will help us to build a more reasonable predictive Machine Learning models.\n\n\n\n\n\nOD Visualization: OD data will help show the commuting pattern. The origin will be the home place in the metro region, and the destination will be within New York City. It will show how NYC attracts people in the surrounding area in employment.\nDistance Calculation: With the dataset we have, our team calculated the OD distance (from home place census tract centroid to workplace census tract centroid), which will be our target variable for Machine Learning model.\n\n\n\n\n\nTo build our model, we decided to integrate a variety of factors that would be helpful for the OD distance prediction. With the machine learning model, we can know the most important features contributing to long-distance commuting. We will also compare the important features before and after COVID-19 to see if there is any difference. Here are the attributes of the variables:\n\nDemographic Data: Job is closely connected with income and salary, which might be important variables to predict future job distributions.\n\nIncome: Personal income will also be an important factor to push people choose long-distance commuting.\nPopulation density: jobs are closely connected with population density, and future population will have an effect on future employment patterns.\nAge: Residents’ age implies how many working population are there in the group.\n\nHome Price: Many people choose to live in the surrounding area and work in New York because of vacations. So, home prices could also be an important factor.\nJob Patterns: the number, type of jobs are important factors to attract people.\n\nTotal number of jobs: Generally, if there are many jobs in an area, it will be attractive to people.\nTypes of job: Types of job sometimes show the method of someone’s work mode, which might also be a factor.\n\n\n\n\n\n\n\n\nImportant\n\n\n\nOur analysis will be based on random forest regression as it shows a degree of high accuracy."
  },
  {
    "objectID": "analysis/index.html#home-and-job-distribution",
    "href": "analysis/index.html#home-and-job-distribution",
    "title": "Analysis & Methods",
    "section": "",
    "text": "Spatial Join/ Folium Map: After wrangling and cleaning the data, to visualize population and jobs, our team utilized geospatial joins for the dataset in the NYC metro region. Then, we will use geopandas and folium maps to visualize them.\nSeaborn - Line Chart: To compare the job trend before and after the pandemic, we used a line chart to show the recent 20 years’ (2002-2022) job numbers.\nOther Exploratory Data Analysis: Some other datasets, such as median income and population density, could also hint at the reasons why certain areas in New York Metro Region attract neighborhood employment populations. By conducting EDAs, we could have a sense of the importance, geographical distribution and changing trend of the features, which will help us to build a more reasonable predictive Machine Learning models."
  },
  {
    "objectID": "analysis/index.html#commuting-pattern",
    "href": "analysis/index.html#commuting-pattern",
    "title": "Analysis & Methods",
    "section": "",
    "text": "OD Visualization: OD data will help show the commuting pattern. The origin will be the home place in the metro region, and the destination will be within New York City. It will show how NYC attracts people in the surrounding area in employment.\nDistance Calculation: With the dataset we have, our team calculated the OD distance (from home place census tract centroid to workplace census tract centroid), which will be our target variable for Machine Learning model."
  },
  {
    "objectID": "analysis/index.html#variables-contributing-to-the-job-home-mismatch",
    "href": "analysis/index.html#variables-contributing-to-the-job-home-mismatch",
    "title": "Analysis & Methods",
    "section": "",
    "text": "To build our model, we decided to integrate a variety of factors that would be helpful for the OD distance prediction. With the machine learning model, we can know the most important features contributing to long-distance commuting. We will also compare the important features before and after COVID-19 to see if there is any difference. Here are the attributes of the variables:\n\nDemographic Data: Job is closely connected with income and salary, which might be important variables to predict future job distributions.\n\nIncome: Personal income will also be an important factor to push people choose long-distance commuting.\nPopulation density: jobs are closely connected with population density, and future population will have an effect on future employment patterns.\nAge: Residents’ age implies how many working population are there in the group.\n\nHome Price: Many people choose to live in the surrounding area and work in New York because of vacations. So, home prices could also be an important factor.\nJob Patterns: the number, type of jobs are important factors to attract people.\n\nTotal number of jobs: Generally, if there are many jobs in an area, it will be attractive to people.\nTypes of job: Types of job sometimes show the method of someone’s work mode, which might also be a factor.\n\n\n\n\n\n\n\n\nImportant\n\n\n\nOur analysis will be based on random forest regression as it shows a degree of high accuracy."
  },
  {
    "objectID": "analysis/2-Commute_Pattern.html",
    "href": "analysis/2-Commute_Pattern.html",
    "title": "Commute Pattern",
    "section": "",
    "text": "1. Communication Ties in NYC Metro Region\nThe integration and expansion of the commuter rail system since the early 20th century have not only spurred suburban growth but also woven the economic prosperity of New York City into the fabric of housing development and population expansion in its neighboring regions. The housing market vital to New York City extends well beyond the confines of the city itself, fostering a dynamic exchange of residents with the suburbs. Remarkably, a significant 20% of the city’s workforce resides outside its urban borders.\n2021 NYC Metro Region Commute Ties Between Boroughs/Counties\n\n\n\n\n\nCommute Population Table\n\n\nCode\nimport pandas as pd\nfrom IPython.display import display, HTML\ncommute_df = pd.read_csv('Data/LODES/COMMUTE_COUNTY_2021.csv')\n\n# Set the maximum number of rows to be displayed per page\nmax_rows_per_page = 10  # Set the desired number of rows per page\npd.set_option('display.max_rows', max_rows_per_page)\n\n# Display the DataFrame with a vertical scroll bar\nwith pd.option_context('display.max_rows', max_rows_per_page):\n    display(commute_df)\n\n\n\n\n\n\n\n\n\nw_countyfp\nh_countyfp\nS000\nhome_county_name\nwork_county_name\n\n\n\n\n0\n5\n5\n113958\nBronx\nBronx\n\n\n1\n5\n47\n25413\nBrooklyn\nBronx\n\n\n2\n5\n59\n14933\nLong Island\nBronx\n\n\n3\n5\n61\n28989\nManhattan\nBronx\n\n\n4\n5\n81\n34362\nQueens\nBronx\n\n\n...\n...\n...\n...\n...\n...\n\n\n38\n85\n47\n15465\nBrooklyn\nStaten Island\n\n\n39\n85\n59\n4552\nLong Island\nStaten Island\n\n\n40\n85\n61\n3566\nManhattan\nStaten Island\n\n\n41\n85\n81\n6867\nQueens\nStaten Island\n\n\n42\n85\n85\n45744\nStaten Island\nStaten Island\n\n\n\n\n43 rows × 5 columns\n\n\n\nManhattan is one of the most densely populated employment centers, supported by various transportation infrastructures. Nearly 15% of workers commute long distances daily from locations such as Long Island, Jersey City, and Staten Island. Residents from Brooklyn and Queens constitute the largest proportion of the commuting population in New York City.\n\n\n2. Job-Home Balance\n\n\n\n\n\nWithin the greater NYC metro area, the equilibrium between housing and employment underwent substantial shifts from 2019 to 2021, notably pronounced in Manhattan. Here, there are 1,061,000 more jobs than housing units. This disparity is particularly evident in the boroughs adjacent to the East River in New York City—Queens, Brooklyn, and the Bronx. Here, housing expansion has significantly outpaced employment growth, signaling a rising trend of residents seeking employment in other regions, chiefly within New York, impacting cross-East River commuting.\nRecent shifts in the balance of housing and employment opportunities, coupled with alterations in commuting patterns, have exacerbated pressures on the transportation network. The evolving landscape underscores the critical role of transit infrastructure in the region. Encouraging employment opportunities and housing development beyond Manhattan, Brooklyn, and Queens holds potential to relieve strain on transportation networks while enhancing employment prospects in other regional areas."
  },
  {
    "objectID": "analysis/0_Data_Processing.html",
    "href": "analysis/0_Data_Processing.html",
    "title": "Does NYC Metro Region have a home-job balance?",
    "section": "",
    "text": "MUSA 550 - Fall 2023\nJingyi Cai, Shuting Li, Yinan Li\nfrom matplotlib import pyplot as plt\nimport numpy as np\nimport pandas as pd\nimport geopandas as gpd\nimport requests\nimport hvplot.pandas\n\nnp.random.seed(42)\npd.options.display.max_columns = 999"
  },
  {
    "objectID": "analysis/0_Data_Processing.html#data-preprocessing",
    "href": "analysis/0_Data_Processing.html#data-preprocessing",
    "title": "Does NYC Metro Region have a home-job balance?",
    "section": "1. Data Preprocessing",
    "text": "1. Data Preprocessing\n\nGeographic Boundary\n\nfrom IPython.display import Image, display, HTML\n\n# Path to your image file\nimage_path = 'Pic/County_boundary/map.png'\n\n# Set the width and height you want\nwidth = 800\nheight = 600\n\n# Display the image with specified width and height\ndisplay(HTML(f'&lt;img src=\"{image_path}\" width=\"{width}\" height=\"{height}\"&gt;'))\n\n\n\n\nNYC 5 boroughs: - Manhattan: New York County, New York - COUNTYFP = 061 - Brooklyn: Kings County, New York - COUNTYFP = 047 - Bronx: Bronx County, New York - COUNTYFP = 005 - Queens: Queens County, New York - COUNTYFP = 081 - Staten Island: Richmond County, New York - COUNTYFP = 085\nOutside NYC counties: - Jersey City: Hudson County, New Jersey - COUNTYFP = 017 (State code = 34) - Long Island: Nassau County, New York - COUNTYFP = 059\nGeographical level: by census tract\n\n# We have processed the geographical data\n# You can load the NYC Metro Region geographical data on census tract directly\nmetro_geojson_path = 'Data/Geo/metro.geojson'\nmetro_gdf = gpd.read_file(metro_geojson_path).to_crs(epsg=2263)\n\n\nlen(metro_gdf)\n\n2680\n\n\n\nmetro_gdf.head()\n\n\n\n\n\n\n\n\nGEOID\nCOUNTYFP\ngeometry\n\n\n\n\n0\n36061001501\n061\nPOLYGON ((981865.515 198455.903, 981935.654 19...\n\n\n1\n36061001600\n061\nPOLYGON ((984941.947 199431.109, 985056.156 19...\n\n\n2\n36061001800\n061\nPOLYGON ((985796.223 201370.479, 985808.416 20...\n\n\n3\n36061002000\n061\nPOLYGON ((990149.045 201586.466, 990284.254 20...\n\n\n4\n36061002201\n061\nPOLYGON ((988552.924 201677.942, 988733.850 20...\n\n\n\n\n\n\n\n\n# Map the NYC Metro Region\nax = plt.figure(figsize=(10, 10)).add_subplot(111)\n\n# Plot the census tracts layer on the same plot\nmetro_gdf.plot(ax=ax, facecolor='none', edgecolor='grey', linewidth=1, label='Census Tracts')\n\n# Remove axis\nax.axis('off')\n\n# Add legend\nax.legend()\n\nC:\\Users\\liyin\\AppData\\Local\\Temp\\ipykernel_11280\\2873712549.py:11: UserWarning: Legend does not support handles for PatchCollection instances.\nSee: https://matplotlib.org/stable/tutorials/intermediate/legend_guide.html#implementing-a-custom-legend-handler\n  ax.legend()\nNo artists with labels found to put in legend.  Note that artists whose label start with an underscore are ignored when legend() is called with no argument.\n\n\n&lt;matplotlib.legend.Legend at 0x1b3e8a38280&gt;\n\n\n\n\n\n\n\nLODES Data\n\n# Path to your image file\nimage_path = 'Pic/LODES_Directory.png'\n\n# Set the width and height you want\nwidth = 600\nheight = 600\n\n# Display the image with specified width and height\ndisplay(HTML(f'&lt;img src=\"{image_path}\" width=\"{width}\" height=\"{height}\"&gt;'))\n\n\n\n\n\n\n1.1 Geospatial Data Processing\n\n# Load the Hudson County, New Jersey GeoJSON data\nhudson_file_path = 'Data/Geo/hudson_census-tracts-2020.geojson'\n\n# Load the GeoJSON file\nhudson_gdf = gpd.read_file(hudson_file_path).to_crs(epsg=2263)\n\n\nhudson_gdf.head()\n\n\n\n\n\n\n\n\ngeo_point_2d\ncousubns\ngeoid\nnamelsad\nclassfp\nfuncstat\naland\nawater\nintptlat\nintptlon\nfid_county\ngeoid_1\nnamelsad_1\naland_1\nawater_1\nintptlat_1\nintptlon_1\nfid_census\nshape_leng\nshape_area\ntractnum\nstate_code\ncounty_cod\ntract_code\ntotal_popu\ntract_mino\nnumber_of\nnumber_of1\nnon_hisp_w\ntract_mi_1\namerican_i\nasian_hawa\nblack_popu\nhispanic_p\nother_popu\ntract_inco\nf2015_msa\nf2020_msa\nf_below_p\ntract_medi\nf2015_trac\nf2020_est\nf2015_tr_1\ntotal_hous\nf1_4_famil\nmedian_hou\niniside_pr\nowner_occu\nvacant_uni\nowner_oc_1\nrenter_occ\ngeometry\n\n\n\n\n0\n{'lon': -74.1000392317, 'lat': 40.6944158194}\n00885264\n3401736000\nJersey City city\nC5\nF\n38185626.0\n16549963.0\n+40.7114174\n-74.0647599\n258\n34017006100\nCensus Tract 61\n775375.0\n0.0\n+40.6944156\n-74.1000391\n725\n0.046168\n0.000083\n61\n34.0\n017\n61.0\n6510.0\n79.14\n1582.0\n2216.0\n1358.0\n5152.0\n0.0\n1508.0\n1622.0\n1883.0\n139.0\nModerate\n67560.0\n81800.0\n25.41\n76.22\n51500.0\n62348.0\n49712.0\n2564.0\n2160.0\n49.0\nYes\n952.0\n348.0\n939.0\n1264.0\nPOLYGON ((957279.165 193357.835, 957147.820 19...\n\n\n1\n{'lon': -74.0529473047, 'lat': 40.7461585721}\n00885264\n3401736000\nJersey City city\nC5\nF\n38185626.0\n16549963.0\n+40.7114174\n-74.0647599\n258\n34017000600\nCensus Tract 6\n321471.0\n0.0\n+40.7461586\n-74.0529473\n837\n0.025882\n0.000034\n6\n34.0\n017\n6.0\n5415.0\n76.69\n1286.0\n2095.0\n1262.0\n4153.0\n29.0\n814.0\n374.0\n2865.0\n71.0\nModerate\n67560.0\n81800.0\n15.51\n78.89\n53304.0\n64532.0\n53186.0\n2353.0\n1196.0\n76.0\nYes\n704.0\n258.0\n542.0\n1391.0\nPOLYGON ((970943.622 211759.854, 970842.935 21...\n\n\n2\n{'lon': -74.0469768013, 'lat': 40.7380920973}\n00885264\n3401736000\nJersey City city\nC5\nF\n38185626.0\n16549963.0\n+40.7114174\n-74.0647599\n258\n34017001300\nCensus Tract 13\n333335.0\n0.0\n+40.7380921\n-74.0469768\n851\n0.028510\n0.000036\n13\n34.0\n017\n13.0\n2900.0\n77.07\n626.0\n1042.0\n665.0\n2235.0\n0.0\n487.0\n209.0\n1488.0\n51.0\nMiddle\n67560.0\n81800.0\n27.65\n80.75\n54559.0\n66054.0\n54706.0\n1193.0\n644.0\n73.0\nYes\n318.0\n151.0\n225.0\n724.0\nPOLYGON ((972169.681 208906.495, 972147.224 20...\n\n\n3\n{'lon': -74.0452694788, 'lat': 40.7265797088}\n00885264\n3401736000\nJersey City city\nC5\nF\n38185626.0\n16549963.0\n+40.7114174\n-74.0647599\n258\n34017002400\nCensus Tract 24\n159733.0\n0.0\n+40.7265797\n-74.0452695\n858\n0.016853\n0.000017\n24\n34.0\n017\n24.0\n2707.0\n38.53\n689.0\n1255.0\n1664.0\n1043.0\n0.0\n317.0\n220.0\n385.0\n121.0\nUpper\n67560.0\n81800.0\n3.88\n218.23\n147438.0\n178512.0\n108250.0\n1359.0\n792.0\n76.0\nYes\n601.0\n104.0\n336.0\n654.0\nPOLYGON ((972153.293 203801.120, 972127.108 20...\n\n\n4\n{'lon': -74.0489344785, 'lat': 40.7198114469}\n00885264\n3401736000\nJersey City city\nC5\nF\n38185626.0\n16549963.0\n+40.7114174\n-74.0647599\n258\n34017003500\nCensus Tract 35\n89372.0\n0.0\n+40.7198114\n-74.0489345\n864\n0.012463\n0.000010\n35\n34.0\n017\n35.0\n1952.0\n57.53\n485.0\n888.0\n829.0\n1123.0\n0.0\n191.0\n211.0\n672.0\n49.0\nUpper\n67560.0\n81800.0\n17.73\n124.70\n84250.0\n102005.0\n75938.0\n1003.0\n470.0\n76.0\nYes\n274.0\n115.0\n162.0\n614.0\nPOLYGON ((971307.984 201839.264, 971302.432 20...\n\n\n\n\n\n\n\n\nlen(hudson_gdf)\n\n67\n\n\n\ncols_to_select = ['geoid_1', 'county_cod', 'geometry']\nhudson_gdf_2 = hudson_gdf[cols_to_select].copy()\n\n\nnew_column_names = {'geoid_1': 'GEOID', 'county_cod': 'COUNTYFP'}\nhudson_gdf_2.rename(columns=new_column_names, inplace=True)\n\n\nhudson_gdf_2.head()\n\n\n\n\n\n\n\n\nGEOID\nCOUNTYFP\ngeometry\n\n\n\n\n0\n34017006100\n017\nPOLYGON ((957279.165 193357.835, 957147.820 19...\n\n\n1\n34017000600\n017\nPOLYGON ((970943.622 211759.854, 970842.935 21...\n\n\n2\n34017001300\n017\nPOLYGON ((972169.681 208906.495, 972147.224 20...\n\n\n3\n34017002400\n017\nPOLYGON ((972153.293 203801.120, 972127.108 20...\n\n\n4\n34017003500\n017\nPOLYGON ((971307.984 201839.264, 971302.432 20...\n\n\n\n\n\n\n\n\n# Load New York State shapefile\nnys_shp = 'Data/Geo/ny_state_tract2020/tl_2020_36_tract.shp'\n\n# Read the shapefile\nnys_shp = gpd.read_file(nys_shp).to_crs(epsg=2263)\n\n# Convert shapefile to geojson\nnys_geojson_path = 'Data/Geo/nys_ct_2020.geojson'\n\n# Write the GeoDataFrame to GeoJSON\nnys_shp.to_file(nys_geojson_path, driver='GeoJSON')\n\n\n# Load the New York State GeoJSON file\nnys_gdf = gpd.read_file(nys_geojson_path).to_crs(epsg=2263)\n\n\nnys_gdf.columns\n\nIndex(['STATEFP', 'COUNTYFP', 'TRACTCE', 'GEOID', 'NAME', 'NAMELSAD', 'MTFCC',\n       'FUNCSTAT', 'ALAND', 'AWATER', 'INTPTLAT', 'INTPTLON', 'geometry'],\n      dtype='object')\n\n\n\ncols_to_select = ['GEOID', 'COUNTYFP', 'geometry']\nnys_gdf_2 = nys_gdf[cols_to_select].copy()\n\n\nnys_gdf_2.head()\n\n\n\n\n\n\n\n\nGEOID\nCOUNTYFP\ngeometry\n\n\n\n\n0\n36047000700\n047\nPOLYGON ((983822.387 191677.069, 983884.784 19...\n\n\n1\n36047000900\n047\nPOLYGON ((985901.155 190988.903, 985987.108 19...\n\n\n2\n36047001100\n047\nPOLYGON ((986821.216 191772.656, 986899.113 19...\n\n\n3\n36047001300\n047\nPOLYGON ((986632.168 193807.053, 986660.709 19...\n\n\n4\n36047002000\n047\nPOLYGON ((979067.973 175146.581, 979229.520 17...\n\n\n\n\n\n\n\n\n# Trim Nassau County, New York\nnassau_gdf = nys_gdf_2[nys_gdf_2['COUNTYFP'] == '059']\n\n# Trim NYC, New York\nMN_gdf = nys_gdf_2[nys_gdf_2['COUNTYFP'] == '061']\nBK_gdf = nys_gdf_2[nys_gdf_2['COUNTYFP'] == '047']\nBX_gdf = nys_gdf_2[nys_gdf_2['COUNTYFP'] == '005']\nQN_gdf = nys_gdf_2[nys_gdf_2['COUNTYFP'] == '081']\nSI_gdf = nys_gdf_2[nys_gdf_2['COUNTYFP'] == '085']\n\n\n# Merge the 7 dataframes together\nmetro_df = pd.concat([MN_gdf, BK_gdf, BX_gdf, QN_gdf, SI_gdf, nassau_gdf, hudson_gdf_2], ignore_index=True)\n\n# Convert to geodataframe\nmetro_gdf = gpd.GeoDataFrame(metro_df, geometry='geometry')\n\n\n# Map the NYC Metro Region\nax = plt.figure(figsize=(10, 10)).add_subplot(111)\n\n# Plot the census tracts layer on the same plot\nmetro_gdf.plot(ax=ax, facecolor='none', edgecolor='grey', linewidth=1, label='Census Tracts')\n\n# Remove axis\nax.axis('off')\n\n# Add legend\nax.legend()\n\nC:\\Users\\liyin\\AppData\\Local\\Temp\\ipykernel_11280\\2873712549.py:11: UserWarning: Legend does not support handles for PatchCollection instances.\nSee: https://matplotlib.org/stable/tutorials/intermediate/legend_guide.html#implementing-a-custom-legend-handler\n  ax.legend()\nNo artists with labels found to put in legend.  Note that artists whose label start with an underscore are ignored when legend() is called with no argument.\n\n\n&lt;matplotlib.legend.Legend at 0x1b3e3f1b5e0&gt;\n\n\n\n\n\n\nmetro_gdf.head()\n\n\n\n\n\n\n\n\nGEOID\nCOUNTYFP\ngeometry\n\n\n\n\n0\n36061001501\n061\nPOLYGON ((981865.515 198455.903, 981935.654 19...\n\n\n1\n36061001600\n061\nPOLYGON ((984941.947 199431.109, 985056.156 19...\n\n\n2\n36061001800\n061\nPOLYGON ((985796.223 201370.479, 985808.416 20...\n\n\n3\n36061002000\n061\nPOLYGON ((990149.045 201586.466, 990284.254 20...\n\n\n4\n36061002201\n061\nPOLYGON ((988552.924 201677.942, 988733.850 20...\n\n\n\n\n\n\n\n\n# Output the merged GeoJSON file\nmetro_geojson_path = 'Data/Geo/metro.geojson'\n\n# Use the to_file method to save the GeoDataFrame to GeoJSON\nmetro_gdf.to_file(metro_geojson_path, driver='GeoJSON')\n\n\n\n1.2 LODES Data\n\n# Load New York State LODES data\nPATH = 'Data/LODES/Original/'\nny_main_2019 = pd.read_csv(PATH + 'ny_od_main_JT01_2019.csv')\nny_main_2021 = pd.read_csv(PATH + 'ny_od_main_JT01_2021.csv')\nny_aux_2019 = pd.read_csv(PATH + 'ny_od_aux_JT01_2019.csv')\nny_aux_2021 = pd.read_csv(PATH + 'ny_od_aux_JT01_2021.csv')\n\n\n# Load New Jersey State LODES data\nPATH = 'Data/LODES/Original/'\nnj_main_2019 = pd.read_csv(PATH + 'nj_od_main_JT01_2019.csv')\nnj_main_2021 = pd.read_csv(PATH + 'nj_od_main_JT01_2021.csv')\nnj_aux_2019 = pd.read_csv(PATH + 'nj_od_aux_JT01_2019.csv')\nnj_aux_2021 = pd.read_csv(PATH + 'nj_od_aux_JT01_2021.csv')\n\n\nprint(len(ny_main_2019), len(ny_aux_2019), len(ny_main_2021), len(ny_aux_2021))\n\n7184925 718485 6604996 707065\n\n\n\nprint(len(nj_main_2019), len(nj_aux_2019), len(nj_main_2021), len(nj_aux_2021))\n\n3086016 367372 2976559 361959\n\n\n\nny_main_2021.head()\n\n\n\n\n\n\n\n\nw_geocode\nh_geocode\nS000\nSA01\nSA02\nSA03\nSE01\nSE02\nSE03\nSI01\nSI02\nSI03\ncreatedate\n\n\n\n\n0\n360010001001003\n360830521021050\n1\n0\n1\n0\n0\n0\n1\n0\n0\n1\n20231016\n\n\n1\n360010001001003\n361150880021037\n1\n0\n1\n0\n0\n0\n1\n0\n0\n1\n20231016\n\n\n2\n360010001001004\n360010006001004\n1\n0\n1\n0\n1\n0\n0\n1\n0\n0\n20231016\n\n\n3\n360010001001004\n360010026001001\n1\n0\n1\n0\n0\n0\n1\n0\n1\n0\n20231016\n\n\n4\n360010001001004\n360010133002002\n1\n0\n1\n0\n0\n0\n1\n1\n0\n0\n20231016\n\n\n\n\n\n\n\n\ndf_21 = pd.concat([ny_main_2021, nj_main_2021, ny_aux_2021, nj_aux_2021], axis=0, ignore_index=True)\n\n\ndf_19 = pd.concat([ny_main_2019, nj_main_2019, ny_aux_2019, nj_aux_2019], axis=0, ignore_index=True)\n\n\nprint(len(df_21), len(df_19))\n\n10650579 11356798\n\n\n\n# Because the 'w_geocode' and 'h_geocode' are all based on census block\n# We need to group it by census tract level\ndef cb_to_ct(df):\n    # Extract the first 11 characters from the 'w_geocode' and 'h_geocode' columns and create new columns\n    df['w_geocode_ct'] = df['w_geocode'].astype(str).str[:11]\n    df['h_geocode_ct'] = df['h_geocode'].astype(str).str[:11]\n\n    # Group the DataFrame by the new 'w_geocode_ct' and 'h_geocode_ct' columns\n    df_ct = df.groupby(['w_geocode_ct', 'h_geocode_ct']).agg({\n        'S000': 'sum',\n        'SA01': 'sum',\n        'SA02': 'sum',\n        'SA03': 'sum',\n        'SE01': 'sum',\n        'SE02': 'sum',\n        'SE03': 'sum',\n        'SI01': 'sum',\n        'SI02': 'sum',\n        'SI03': 'sum'\n    })\n    \n    # Reset the index to make 'w_geocode_ct' and 'h_geocode_ct' regular columns\n    df_ct = df_ct.reset_index()\n    \n    return df_ct\n\n\nct_df_21 = cb_to_ct(df_21)\n\n\nct_df_19 = cb_to_ct(df_19)\n\n\nprint(len(ct_df_21), len(ct_df_19))\n\n3653537 4161191\n\n\n\n# Trim the data to whose job and home are located in the metro area\n\n# Convert 'GEOID' from object to numerical (assuming it's convertible)\n# nyc_metro_gdf['GEOID_n'] = pd.to_numeric(nyc_metro_gdf['GEOID'], errors='coerce')\n\n# Get the list of 'GEOID' values from the 'nyc_gdf' GeoDataFrame\nmetro_geoid_list = metro_gdf['GEOID'].tolist()\n\n\n# Trim the LODES data to the population whose workplace is within NYC\ndef job_home_to_metro(df):\n    df_metro = df[df['w_geocode_ct'].isin(metro_geoid_list) & df['h_geocode_ct'].isin(metro_geoid_list)]\n    return df_metro\n\n\n# Trim the LODES data to the population whose workplace is within NYC\ndef job_to_metro(df):\n    df_metro = df[df['w_geocode_ct'].isin(metro_geoid_list)]\n    return df_metro\n\n\n# Trim the LODES data to the population whose workplace is within NYC\ndef home_to_metro(df):\n    df_metro = df[df['h_geocode_ct'].isin(metro_geoid_list)]\n    return df_metro\n\n\nct_home_job_2021 = job_home_to_metro(ct_df_21)\njob_ct_2021 = job_to_metro(ct_df_21)\nhome_ct_2021 = home_to_metro(ct_df_21)\n\n\nprint(len(ct_home_job_2021), len(job_ct_2021), len(home_ct_2021))\n\n1173976 1495037 1469405\n\n\n\nct_home_job_2021.columns\n\nIndex(['w_geocode_ct', 'h_geocode_ct', 'S000', 'SA01', 'SA02', 'SA03', 'SE01',\n       'SE02', 'SE03', 'SI01', 'SI02', 'SI03'],\n      dtype='object')\n\n\n\nct_home_job_2019 = job_home_to_metro(ct_df_19)\njob_ct_2019 = job_to_metro(ct_df_19)\nhome_ct_2019 = home_to_metro(ct_df_19)\n\n\nprint(len(ct_home_job_2019), len(job_ct_2019), len(home_ct_2019))\n\n1260007 1880033 1571979\n\n\n\n# Specify the output CSV file path\noutput_csv_path = 'Data/LODES/Home_Job/'\n\n# Use the to_csv method to save the DataFrame to a CSV file\nct_home_job_2021.to_csv(output_csv_path + 'HOME_JOB_2021.csv', index=False)\nct_home_job_2019.to_csv(output_csv_path + 'HOME_JOB_2019.csv', index=False)\n\n\n\nLODES Data\n\n1. Employment by Census Tract\n\n# Specify the output CSV file path\noutput_csv_path = 'Data/LODES/Home_Job/'\n\n# Use the to_csv method to save the DataFrame to a CSV file\nct_home_job_2021.read_csv(output_csv_path + 'HOME_JOB_2021.csv', index=False)\nct_home_job_2019.read_csv(output_csv_path + 'HOME_JOB_2019.csv', index=False)\ndf_19_metro = pd.read_csv"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About Us",
    "section": "",
    "text": "Jingyi Cai\nAs a graduate student at UPenn, I’m immersed in the dynamic world of city planning with a diverse skill set encompassing planning, data analysis, design, and mapping. I care about the sustainable economic development, vibrant public space, and the affordability and equity of city life. I believe city planning is not only about the future, but roots in the past and present. Thus, I’m driven to uncover the untold stories that shape our cities and help cities imagine and build a brighter vision by policy making, planning and design.\nBesides growing to be a city planner, I’m also a keen traveler, whose footprint has covered 4 continents, 17 countries and 100+ cities.\nYou can find more information about me on my LinkedIn.\n\n\n\n\n\n\n\n\n\n\n\nShuting Li\nIn my role as an urban designer and landscape architect, my passion lies in shaping a more equitable and inclusive society through intentional design. My works includes a great sphere, ranging from promoting equitable growth in informal settlements to advocating for the rights of climate immigrants and addressing justice in agricultural production. Simultaneously, I actively participate in practical areas such as data analysis and urban economics. My aim is to enrich the field of design through rigorous and systematic research, providing valuable insights to empower the creative process. I am committed to creating flexible spaces that accommodate the diverse narratives of all stakeholders, serving as a mediator in fostering meaningful relationships.\nYou can find more information about me on my LinkedIn.\n\n\n\n\n\n\n\n\n\n\n\nYinan Li\nAs a graduate student at UPenn, I’m immersed in the dynamic world of city planning with a diverse skill set encompassing planning, data analysis, design, and mapping. I care about the sustainable economic development, vibrant public space, and the affordability and equity of city life. I believe city planning is not only about the future, but roots in the past and present. Thus, I’m driven to uncover the untold stories that shape our cities and help cities imagine and build a brighter vision by policy making, planning and design.\nBesides growing to be a city planner, I’m also a keen traveler, whose footprint has covered 4 continents, 17 countries and 100+ cities.\nYou can find more information about me on my LinkedIn."
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html",
    "href": "analysis/1-Home_Job_Distribution.html",
    "title": "Home & Job Distribution",
    "section": "",
    "text": "In this part, we used ACS and LODES data to explore the changing trend of home and job distribution between pre-COVID(2019) and post-COVID(2021). We used LODES data to identify the job related features, such as employment number, labor force age, income and industry. We aggregate the workplace and homeplace of the original LODES data (JT01, primary job) from census block to census tract level. And convert the population of different categories (Age, Income, Industry) into proportion percent. And we used ACS data to explore the demographic features, such as population density, housing price and tenure.\nCode\n# Load NYC Metro Data\nmetro_geojson_path = 'Data/Geo/metro.geojson'\nmetro_gdf = gpd.read_file(metro_geojson_path).to_crs(epsg=2263)\n\n# Load LODES data\ncsv_path = 'Data/LODES/'\n\n# Read csv file\nw_21 = pd.read_csv(csv_path + 'OD_w_2021.csv')\nw_19 = pd.read_csv(csv_path + 'OD_w_2019.csv')\nh_21 = pd.read_csv(csv_path + 'OD_h_2021.csv')\nh_19 = pd.read_csv(csv_path + 'OD_h_2019.csv')"
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#employment-number",
    "href": "analysis/1-Home_Job_Distribution.html#employment-number",
    "title": "Home & Job Distribution",
    "section": "1. Employment Number",
    "text": "1. Employment Number\nTo explore the employment trend in recent 20 years, we used API for Bureau of Labor Statistics to see the total number of jobs in NYC Metro Region. It shows very clearly that the number of jobs has dropped significantly in 2008 (predicted to be an economic crisis) and 2019 (pendamic). However, from 2021 onwards, there are signs of economic recovery.\n\n\n\n\n\n\nGeographically, from 2019 to 2022, all counties in NYC metro region suffer a decrease in work position. The entire region loses 513,813 jobs. 65.6% job decrease is in Manhatten, the economic core of the region.\n\n\n\n\n\nThe employment number is calculated by the total job number in each census tract from LODES dataset. As the map below shows, the overall employment number distribution is roughly the same before and after the pandemic. Considering the size of census tract, employment is concentrated at Midtown and Downtown Manhattan and downtown Brooklyn.\n\n\nCode\nmap_w_19 + map_w_21"
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#middle-age-labor-force-age",
    "href": "analysis/1-Home_Job_Distribution.html#middle-age-labor-force-age",
    "title": "Home & Job Distribution",
    "section": "2. Middle-age Labor Force Age",
    "text": "2. Middle-age Labor Force Age\nHere, we calculated the middle-age labor force (age 30-54) percentage to explore the labor force age structure. We guess that the younger employees have higher will to commute longer distance for work, which might be an importance variable to predict the commute distance.\nFor both year 2019 and 2021, the middle-age labor force tend to work within the city, while the suburbs, such as Long Island and Staten Island have a lower percentage of middle-age labor force. We also found that, compared to pre-COVID time, there is a higher proportion of middle-age work force in suburban areas. It might be a result of the emerging WFH working pattern and lower housing price of suburbs.\n\n\nCode\nmap_w_19_age + map_w_21_age"
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#income",
    "href": "analysis/1-Home_Job_Distribution.html#income",
    "title": "Home & Job Distribution",
    "section": "3. Income",
    "text": "3. Income\nIn these two maps, we try to compare the low income ($1,250/month or less) jobs proportion. For both year 2019 and 2021, New York City, especially Manhattan, provides more high-paying jobs than suburbs like Long Island, Staten Island and Jersey City. From 2019 to 2021, there are more low-paying jobs across the metro area, especially for the surrouding area.\n\n\nCode\nmap_w_19_low_income + map_w_21_low_income"
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#service-industry",
    "href": "analysis/1-Home_Job_Distribution.html#service-industry",
    "title": "Home & Job Distribution",
    "section": "4. Service Industry",
    "text": "4. Service Industry\nLODES dataset classifies the industries into (1) Goods Producing; (2) Trade, Transportation, and Utilities; and (3) All Other Services. Among them, service industry is mainly concentrated at the city. But south Bronx, north Brooklyn and south Queens are in low proportion of service industry.\n\n\nCode\nmap_w_19_service + map_w_21_service"
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#population-density",
    "href": "analysis/1-Home_Job_Distribution.html#population-density",
    "title": "Home & Job Distribution",
    "section": "5. Population Density",
    "text": "5. Population Density\nIn this step, we use ACSDT5Y2021ACS and ACSDT5Y2019 data to explore the jobs change in NYC metro region. From 2019 to 2022, the total population in NYC metro region increases 342,629. Looking at population density maps, the rapid population growth areas are Brooklyn, Queens and Staten Island."
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#home-distribution",
    "href": "analysis/1-Home_Job_Distribution.html#home-distribution",
    "title": "Home & Job Distribution",
    "section": "6. Home Distribution",
    "text": "6. Home Distribution\nMore people are moving to the cheaper suburban area.\n\n\nCode\nmap_h_19 + map_h_21"
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#median-housing-value",
    "href": "analysis/1-Home_Job_Distribution.html#median-housing-value",
    "title": "Home & Job Distribution",
    "section": "7. Median Housing Value",
    "text": "7. Median Housing Value\nFrom 2019 to 2021, the housing prices rise across the entire NYC metro region, especially in Staten Island, Queens, Long Island and Brooklyn.\n\n\n\n\n\nHowever, looking at the housing prices change rate, South Long Island, Brooklyne, Jersey City, Queens increase the most."
  },
  {
    "objectID": "analysis/1-Home_Job_Distribution.html#tenure",
    "href": "analysis/1-Home_Job_Distribution.html#tenure",
    "title": "Home & Job Distribution",
    "section": "8. Tenure",
    "text": "8. Tenure\nThe closer the settlement is situated to the NYC metro region boundaries, the higher the proportion of owner-occupied housing is, which is somewhat related to the relatively low house values.\n\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook\n\n\n\n\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook"
  },
  {
    "objectID": "analysis/3-ML.html",
    "href": "analysis/3-ML.html",
    "title": "Machine Learning",
    "section": "",
    "text": "To better understand the impact of pandemic on long-distance commuting patterns, our team used a Random Forest model to delve deeper into the underlying characteristics that influence OD-distance (origin-destination distance). The analysis aims to shed light on the intricate relationship between workplaces and neighborhoods. This modeling approach allows us to test our hypotheses: the escalating job opportunities in New York City have propelled a surge in housing prices, intensifying an imbalanced home-job dynamic. This gravitational pull has created a pronounced ‘siphoning effect’ on the surrounding metro region. We predict that due to factors like the high-density job market, higher incomes, and soaring housing prices within NYC, plus the WFH new pattern after the Pandemic, in the future, more people will opt to live in the surrounding areas while commuting to work in the central area of New York City."
  },
  {
    "objectID": "analysis/3-ML.html#introduction",
    "href": "analysis/3-ML.html#introduction",
    "title": "Machine Learning",
    "section": "",
    "text": "To better understand the impact of pandemic on long-distance commuting patterns, our team used a Random Forest model to delve deeper into the underlying characteristics that influence OD-distance (origin-destination distance). The analysis aims to shed light on the intricate relationship between workplaces and neighborhoods. This modeling approach allows us to test our hypotheses: the escalating job opportunities in New York City have propelled a surge in housing prices, intensifying an imbalanced home-job dynamic. This gravitational pull has created a pronounced ‘siphoning effect’ on the surrounding metro region. We predict that due to factors like the high-density job market, higher incomes, and soaring housing prices within NYC, plus the WFH new pattern after the Pandemic, in the future, more people will opt to live in the surrounding areas while commuting to work in the central area of New York City."
  },
  {
    "objectID": "analysis/3-ML.html#feature-engineering-modeling",
    "href": "analysis/3-ML.html#feature-engineering-modeling",
    "title": "Machine Learning",
    "section": "Feature Engineering & Modeling",
    "text": "Feature Engineering & Modeling\nTo develop a Random Forest Regression model using 2021 data, we first split it into a training dataset (70%) and a testing dataset (30%). We decided to integrate various factors that contribute to long-distance commuting predictions. Through machine learning models, we can understand the most important features for long-distance commuting. We also compare the significant features before and after COVID-19 to see if there are any differences. Based on the dataset obtained from the first step, we ultimately selected the following features:\n\nPopulation Data: Population data is closely related to work, income, and wages, making it an important variable for predicting future work distribution.\nIncome: Personal income is also a crucial factor influencing people’s choices for long-distance commuting.\nPopulation Density: Work is closely related to population density, and future population trends will impact future employment patterns.\nAge: The age of residents signifies how much of the population constitutes the labor force.\nHousing Prices: Many people choose to live and work in the surrounding areas of New York for leisure. Therefore, housing prices could be an important factor.\nWork Patterns: The number and types of job positions are important factors attracting individuals.\nTotal Job Positions: In general, if an area has a lot of job positions, it tends to be attractive to people.\nJob Types: Job types sometimes reflect an individual’s work pattern, which could be another influencing factor.\n\n\n\n\n\n\nUnder that, we create a correlation matrix to examine the correlation between those numerical variables.\n\n\n\n\n\nWe tried to identify the most influential factors. From the graph below, we can find that the most critical factors are the number of job positions, median housing value, and population density. This aligns with our initial assumptions, as these features to some extent reflect the job market, worker income, and housing prices. In terms of geographical location, Staten Island and Manhattan are of higher importance. This suggests that the model may perform better or be more applicable in these areas."
  },
  {
    "objectID": "analysis/3-ML.html#model-performance",
    "href": "analysis/3-ML.html#model-performance",
    "title": "Machine Learning",
    "section": "Model Performance",
    "text": "Model Performance\nWe intend to demonstrate OD-distance based on the workplace to gain a clearer understanding of the relationship between job distribution and community dynamics by building Random Forest model.\nTo further improve the model, we used 5-fold cross-validation to find the best model: depth = 10, estimators = 30. The result for the best model’s R^2 is 0.24, this is not so high because the LODES data is not precise figure but just intervals. However, the importance of features still make sense to our research.\nAfter finding the best model, we calculated the predicted od distance and percentage error for each working tract.\nWe find that the distribution of model errors is very regionally characterized. Overall, the model predictions in the Brooklyne and Queens districts are skewed high, while most of the other districts are skewed low. This is related to the residential character of the Brooklyne, Queens districts, which, due to their positioning, results in these two districts not having a large number of jobs.\nAdditionally, Manhattan Island has a low overall error and generally has lower predicted values than true values. This is because Manhattan Island is one of the core areas for employment in New York and has a higher job attraction for citizens.\n\n\n\nMake this Notebook Trusted to load map: File -&gt; Trust Notebook"
  },
  {
    "objectID": "analysis/3-ML.html#extra-exploration-will-the-subway-influence-our-project",
    "href": "analysis/3-ML.html#extra-exploration-will-the-subway-influence-our-project",
    "title": "Machine Learning",
    "section": "Extra Exploration: will the subway influence our project?",
    "text": "Extra Exploration: will the subway influence our project?\nIn addition, since OD distance is not exactly equal to commuting distance, the local transportation facilities in the area will also have a greater impact on OD distance. So, our team want to explore if there is the relationship between the percentage of error in our model and the subway station distribution because if there is a local subway station, it means an increase in commuting capacity, which may attract more people who commute in from far away. So, we made a map, overlaying subway station points on median percentage error map."
  },
  {
    "objectID": "conclusion.html",
    "href": "conclusion.html",
    "title": "Conclusions",
    "section": "",
    "text": "We recognize the limitations inherent in our models. Originally, our intention was to compare 2019 with 2023 to better capture post-COVID characteristics. However, due to the unavailability of OD-distance data beyond 2021, we had to resort to using 2019 for comparison. Unfortunately, the changes in home distribution between 2019 and 2021 are not markedly significant. We attribute this to the lag in economic impacts on residence, given that most housing contracts are long-term. Consequently, the 2021 data may not entirely reflect the full effects of the pandemic, potentially contributing to our model’s modest R-squared value of 0.24."
  },
  {
    "objectID": "conclusion.html#limitations",
    "href": "conclusion.html#limitations",
    "title": "Conclusions",
    "section": "",
    "text": "We recognize the limitations inherent in our models. Originally, our intention was to compare 2019 with 2023 to better capture post-COVID characteristics. However, due to the unavailability of OD-distance data beyond 2021, we had to resort to using 2019 for comparison. Unfortunately, the changes in home distribution between 2019 and 2021 are not markedly significant. We attribute this to the lag in economic impacts on residence, given that most housing contracts are long-term. Consequently, the 2021 data may not entirely reflect the full effects of the pandemic, potentially contributing to our model’s modest R-squared value of 0.24."
  },
  {
    "objectID": "conclusion.html#conclusions",
    "href": "conclusion.html#conclusions",
    "title": "Conclusions",
    "section": "Conclusions",
    "text": "Conclusions\nDespite these limitations, our findings carry meaningful implications. They underscore the substantial impact of the pandemic on the job market, particularly affecting soon-to-be graduates like us. Moreover, the interconnected economic ecosystem in the NYC metro region transcends the city’s physical boundaries. Shifts in regional factors such as job positions, median housing value, and population density influence the delicate balance between employment and housing, impacting affordability, commuting patterns, and transportation infrastructure. To proactively address future development, we recommend that the government strategically increase job opportunities and housing options outside the city, particularly in locations with convenient transportation. This approach could alleviate pressure on the transportation network while simultaneously enhancing employment prospects in various regions."
  }
]